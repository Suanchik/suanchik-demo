{"version":3,"sources":["components/Messages/Messenger.module.css","assets/avaImg/close.svg","components/Messages/Dialog.jsx","components/Messages/MessagesList.jsx","components/Messages/Messenger.jsx","components/Messages/Messenger.Container.jsx"],"names":["module","exports","Dialog","props","className","classes","itemD","dialogMessage","messages","map","message","author","mymessage","span","src","name","img","ava","alt","onClick","messagId","id","window","confirm","deleteMessage","index","udalit","MessagesList","item","dialogStyles","names","dialogList","maxLength500","maxLengthCreator","AddMessageReduxForm","reduxForm","form","onSubmit","handleSubmit","textareaButton","Field","component","TextareaPostsAndMessages","placeholder","cols","validate","required","disabled","dialogId","withRouter","useState","personDialog","setpersonDialog","match","params","useEffect","m","messagesList","filter","el","dialogname","dialog","messagesData","to","getPersonDialog","activeClassName","active","key","addMessages","value","addMessageC","Math","random","messageBody","Dialogs","style","display","backgroundColor","boxShadow","marginRight","messagelist","curentDialog","opacity","fontWeight","d","dialog2","path","render","compose","connect","state","profile","ProfilePage","newMLetter","MessagesPage","dispatch","addMessageAC","withAuthRedirect","Messenger"],"mappings":"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","file":"static/js/3.67a8d12f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dialogs\":\"Messenger_Dialogs__2sLEJ\",\"messagelist\":\"Messenger_messagelist__39cRO\",\"itemD\":\"Messenger_itemD__vkkcW\",\"dialogMessage\":\"Messenger_dialogMessage__2_Vwk\",\"img\":\"Messenger_img__1jjgU\",\"dialog\":\"Messenger_dialog__kWiKW\",\"item\":\"Messenger_item__aHh78\",\"names\":\"Messenger_names__13KEh\",\"active\":\"Messenger_active__RDj_G\",\"dialogStyles\":\"Messenger_dialogStyles__18rWz\",\"dialog2\":\"Messenger_dialog2__OBFf3\",\"textareaButton\":\"Messenger_textareaButton__94N5s\",\"showMessage\":\"Messenger_showMessage__HP9ru\",\"lastmessage\":\"Messenger_lastmessage__1ZU2J\",\"span\":\"Messenger_span__3cocT\",\"mymessage\":\"Messenger_mymessage__jDiZP\",\"curentDialog\":\"Messenger_curentDialog__3LUex\",\"name\":\"Messenger_name__Gj85-\"};","module.exports = __webpack_public_path__ + \"static/media/close.1175686f.svg\";","import React from 'react';\r\nimport classes from './Messenger.module.css';\r\nimport udalit from '../../assets/avaImg/close.svg';\r\nimport ava from '../../assets/avaImg/mal2.jpg'\r\n\r\nconst Dialog = (props) => {\r\n\r\n    const deleteMessage = (messagId) => {\r\n        if (window.confirm('удалить сообщение?')) {\r\n            props.deleteMessage(props.index, messagId)\r\n        }\r\n    }\r\n    return (\r\n        <div className={classes.itemD}>\r\n            <div className={classes.dialogMessage}>\r\n                {props.messages.map(message =>\r\n                    <div className=\"dialog_container\">\r\n                        <span className={message.author === 'me' ? classes.mymessage : classes.span}>\r\n                            <img src={message.author === props.name ? props.img : ava} alt=\"\" /> {message.message}\r\n                        </span>\r\n                        <span className={classes.img} onClick={() => deleteMessage(message.id)}>\r\n                            <img src={udalit} alt=\"delete\" />\r\n                        </span>\r\n                    </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n;\r\nexport default Dialog;","import React from 'react';\r\nimport classes from './Messenger.module.css';\r\n\r\n\r\nconst MessagesList = (props) => {\r\n    return (\r\n        <div className={classes.item}>\r\n            <div>\r\n                <div className={classes.dialogStyles}>\r\n                    <div className={classes.names}>{props.dialogList}</div>{props.img}\r\n                    {/* <div className={classes.lastmessage}>последнее сообщениe</div> */}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default MessagesList;","import React, { useEffect, useState } from 'react';\r\nimport Dialog from './Dialog';\r\nimport MessagesList from './MessagesList';\r\nimport classes from './Messenger.module.css'\r\nimport ava from '../../assets/avaImg/mal2.jpg';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { TextareaPostsAndMessages } from '../coummon/Prilouder/formControls/formControls';\r\nimport { maxLengthCreator, required } from '../../Utils/validator/validator';\r\nimport { NavLink, Route } from 'react-router-dom';\r\nimport { withRouter } from 'react-router';\r\n\r\n\r\nconst Messenger = (props) => {\r\n\r\n    const [personDialog, setpersonDialog] = useState(null);\r\n\r\n    const getPersonDialog = (m) => {\r\n        setpersonDialog({ dialogname: m.dialogname, img: m.img })\r\n    }\r\n\r\n    let dialogId = props.match.params.dialogId;\r\n\r\n    useEffect(() => {\r\n        if (dialogId) {\r\n            const m = [...props.messagesList].filter(el => el.id === dialogId)\r\n            setpersonDialog({ dialogname: m[0].dialogname, img: m[0].img })\r\n        } else {\r\n            const m = [...props.messagesList].filter(el => el.id === dialogId)\r\n            setpersonDialog({ dialogname: null, img: ava })\r\n        }\r\n    }, [])\r\n\r\n\r\n    let dialog = props.messagesList;\r\n    let messagesList = props.messagesList;\r\n\r\n    let messagesData = messagesList.map((m, index) => <NavLink to={`/Messenger/` + m.id} onClick={() => getPersonDialog(m)} activeClassName={classes.active} ><MessagesList key={index} id={m.id} dialogList={m.dialogname} img={<img src={!m.img ? ava : m.img} />} /></NavLink>)\r\n\r\n    let addMessages = (value) => {\r\n        props.addMessageC({ id: Math.random() * 5, message: value.messageBody, author: 'me' }, dialogId)\r\n    }\r\n\r\n    return (\r\n        <div className={classes.Dialogs}>\r\n            <span style={{ display: \"inline-block\", backgroundColor: \"white\", boxShadow: \"0 0 0 0.5px rgb(0,0,0, 0.5)\", marginRight: \"-5px\" }}>\r\n                {/* <span className={classes.showMessage} onClick={ShowMessage}>cкрыть сообщения</span> */}\r\n                <div className={classes.messagelist}>\r\n                    {messagesData}\r\n                </div>\r\n            </span>\r\n            {/* } */}\r\n            <div className={classes.dialog}>\r\n                {\r\n                    personDialog ?\r\n                        <div className={classes.curentDialog}>\r\n                            <div className={classes.name}>\r\n                                <span style={{ opacity: '0.7', fontWeight: 'normal' }}>{personDialog.dialogname === null ? \"выберите собеседника\" : \"ваша переписка с\"} </span>{personDialog.dialogname}</div>\r\n                            <img src={personDialog.img} alt=\"ava\" />\r\n                        </div> :\r\n                        null\r\n                }\r\n                {\r\n                    dialog.map((d, index) =>\r\n                        <div className={classes.dialog2}>\r\n                            <Route path={\"/Messenger/\" + d.id} render={() =>\r\n                                <Dialog name={d.dialogname} img={d.img} key={index} index={index} id={d.id} messages={d.dialog} deleteMessage={props.deleteMessage} />\r\n                            } />\r\n                            <AddMessageReduxForm dialogId={dialogId} onSubmit={addMessages} />\r\n                        </div>)\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst maxLength500 = maxLengthCreator(500);\r\n\r\nconst addMessageForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div className={classes.textareaButton}>\r\n                <Field component={TextareaPostsAndMessages} placeholder=\"Напишите ваше сообщние ...\" cols=\"70\" name=\"messageBody\" validate={[required, maxLength500]} />\r\n                <button disabled={!props.dialogId}>Отправить</button>\r\n            </div>\r\n        </form>\r\n\r\n    )\r\n};\r\n\r\nconst AddMessageReduxForm = reduxForm({ form: \"messenger\" })(addMessageForm);\r\n\r\nexport default withRouter(Messenger);","import { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { withAuthRedirect } from '../../Hoc/withAuthRedirect';\r\nimport { addMessageAC, deleteMessage } from '../../redux/messagesReducer';\r\nimport Messenger from './Messenger';\r\n\r\n\r\n\r\nlet MapStateToProps = (state) => {\r\n    return {\r\n        profile: state.ProfilePage.profile,\r\n        newMLetter: state.MessagesPage.newMLetter,\r\n        dispatch: state.MessagesPage.dispatch,\r\n        dialog: state.MessagesPage.dialog,\r\n        messagesList: state.MessagesPage.messagesList\r\n    }\r\n};\r\n\r\nlet MapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addMessageC(messageBody, dialogId) {\r\n            dispatch(addMessageAC(messageBody, dialogId))\r\n        },\r\n        deleteMessage(index, id) {\r\n            dispatch(deleteMessage(index, id))\r\n        }\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(MapStateToProps, MapDispatchToProps),\r\n    withAuthRedirect\r\n)(Messenger)\r\n\r\n"],"sourceRoot":""}